# Updates to ICON and BCON

[Christian Hogrefe](mailto:hogrefe.christian@epa.gov), U.S. Environmental Protection Agency

## Brief Description

The ICON and BCON pre-processors were updated to use height-based vertical interpolation rather than vertical interpolation based on the I/O API VGLVLS attribute if hybrid vertical coordinates were used in WRF as indicated by VGTYP = -9999 in the MCIP files for either the coarse or fine grid. The reason for this change is that the values in the VGLVLS attribute do not uniquely describe the vertical structure for this hybrid vertical coordinate and should therefore not be used as the basis for vertical interpolation in this case.

Furthermore, ICON and BCON were also updated to support the processing of grids using an equatorial mercator projection.

## Significance and Impact

The updates to the vertical interpolation approach change the vertical structure of the IC and BC files generated by ICON and BCON in cases where these processors are used in `regrid` mode and the WRF hybrid vertical coordinate system was used in the coarse source domain, the fine target domain, or both. The magnitude of the impact depends on the specific domain configuration. The addition of support for grids using an equatorial mercator projection enables the use of ICON and BCON for such applications.

## Affected Files

PREP/bcon/src/common/lat_lon.F
PREP/bcon/src/m3conc/m3_driver.F
PREP/bcon/src/m3conc/m3_vinterp.F
PREP/icon/scripts/run_icon.csh
PREP/icon/src/common/lat_lon.F
PREP/icon/src/m3conc/m3_driver.F
PREP/icon/src/m3conc/m3_vinterp.F


## References

N/A

-----
## Internal Records

#### Relevant Pull Requests:

PR729

#### Commit IDs:

929ae68cb922272f4caa4fc2d7b5b4fbe97a6aec 
14459923332b1415f2a72cbfbb8f5c3c158e3b46 
cd73f55ba439d32a70b9918e599855384ee438d0 


-----
